<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Modernize Free</title>
	<link rel="shortcut icon" type="image/png" href="../../resources/images/logos/favicon.png" />
	<link rel="stylesheet" href="../../resources/css/styles.min.css" />
</head>

<body>
	<!--  Body Wrapper -->
	<div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
		data-sidebar-position="fixed" data-header-position="fixed">
		<div
			class="position-relative overflow-hidden radial-gradient min-vh-100 d-flex align-items-center justify-content-center">
			<div class="d-flex align-items-center justify-content-center w-100">
				<div class="row justify-content-center w-100">
					<div class="col-md-8 col-lg-6 col-xxl-3">
						<div class="card mb-0">
							<div class="card-body">
								<a href="./index.html" class="text-nowrap logo-img text-center d-block py-3 w-100">
									<img src="../../resources/images/logos/dark-logo.svg" width="180" alt="">
								</a>
								<p class="text-center">A gestão da sua empresa</p>

								<form class="row g-3" method="POST">
									<div class="col-md-6">
										<label for="nome" class="form-label">Primeiro Nome</label>
										<input type="text" class="form-control" id="nome" value=""
											required>
										<div class="valid-feedback">
											Certo!
										</div>
									</div>
									<div class="col-md-6">
										<label for="sobreNome" class="form-label">Último nome</label>
										<input type="text" class="form-control" id="sobreNome" value=""
											required>
										<div class="valid-feedback">
											Certo!
										</div>
									</div>
									<div class="col-md-6">
										<label for="email" class="form-label">Email</label>
										<input type="email" class="form-control" id="email" value=""
											required>
										<div class="valid-feedback">
											Certo!
										</div>
									</div>

									<div class="col-md-6">
										<label for="telefone" class="form-label">Celular</label>
										<input type="tel" class="form-control" id="telefone"
											placeholder="(99) 99999-9999" required>
										<div class="valid-feedback">
											Certo!
										</div>
									</div>

									<div class="col-2">
										<div class="form-check">
											<input class="form-check-input" type="radio" name="flexRadioDefault"
												value="CNPJ" id="flexRadioDefault1">
											<label class="form-check-label" for="flexRadioDefault1">
												CNPJ
											</label>
										</div>
										<div class="form-check">
											<input class="form-check-input" type="radio" name="flexRadioDefault"
												value="CPF" id="flexRadioDefault2" checked>
											<label class="form-check-label" for="flexRadioDefault2">
												CPF
											</label>
										</div>
									</div>
									<div class="col-10">
										<input class="form-control" id="CnpjCpf" type="text" placeholder="">
									</div>

									<div class="col-6 mb-0">
										<label for="senha" class="form-label">Senha</label>
										<input type="password" id="senha" class="form-control">
									</div>
									<div class="col-6 mb-0">
										<label for="confirmeSenha" class="form-label">Confirme a senha</label>
										<input type="password" id="confirmeSenha" class="form-control">
									</div>
									<p class="mt-0">Sua senha deve ter de 8 a 20 caracteres, conter letras e números e
										não deve conter espaços, caracteres especiais.</p>

									<div class="col-12">
										<div class="form-check">
											<input class="form-check-input" type="checkbox" value="" id="invalidCheck3"
												aria-describedby="invalidCheck3Feedback" required>
											<label class="form-check-label" for="invalidCheck3">
												Concordo com os termos e condições
											</label>
											<div id="invalidCheck3Feedback" class="invalid-feedback">
												Você deve concordar antes de enviar.
											</div>
										</div>
									</div>
									<div class="col-12">
										<button class="btn btn-primary" type="submit">Enviar</button>
									</div>
								</form>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js"></script>

	<script src="../../resources/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script>
		$(document).ready(function () {
			$('#telefone').inputmask("(99) 99999-9999");


			// Defina a máscara inicial para CPF
			$('#CnpjCpf').inputmask("999.999.999-99");

			// Adicione um evento de clique aos radios
			$('input[name="flexRadioDefault"]').click(function () {
				// Verifique qual radio está selecionado
				var tipoDocumento = $(this).val();

				// Defina a máscara apropriada com base na seleção do radio
				if (tipoDocumento === "CPF") {
					$('#CnpjCpf').inputmask("999.999.999-99", { placeholder: "" });
				} else if (tipoDocumento === "CNPJ") {
					$('#CnpjCpf').inputmask("99.999.999/9999-99", { placeholder: "" });
				}
			});

			// Adicione validação para permitir apenas números
			$('#CnpjCpf').on('input', function () {
				var sanitized = $(this).val().replace(/[^0-9]/g, '');
				$(this).val(sanitized);
			});


			$('form').submit(function (event) {
				// Evita o envio automático do formulário
				event.preventDefault();

				if ($('#senha').val() !== $('#confirmeSenha').val()) {
					// Exibe um alerta usando SweetAlert
					Swal.fire({
						icon: 'error',
						title: 'Oops...',
						text: 'As senhas devem ser iguais!',
					});
				} else {
					$.ajax({
					url: '/cadastrar/salvar',
					type: 'POST',
					async: false,
					data: {
						nome: $('#nome').val(),
						sobreNome: $('#sobreNome').val(),
						email: $('#email').val(),
						phone: $('#telefone').val(),
						identidade: $('#CnpjCpf').val(),
						tipo: $('input[name="flexRadioDefault"]:checked').val(),
						senha: $('#senha').val(),
					},success: function (data) {

							var objData1 = JSON.parse(data)

							Swal.fire({
								icon: 'success',
								title: 'Uhuuul',
								text: 'Cadastro realizado com sucesso!',
							});

							setTimeout(() => {
								window.location.href = '/';
							}, 5000);

						}
					})

				}
			});
		});
	</script>
</body>

</html>